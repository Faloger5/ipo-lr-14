from PIL import Image  # Импортируем класс Image из библиотеки Pillow для работы с изображениями

class ImageHandler:  # Определяем класс ImageHandler для базовых операций с изображением
    def __init__(self, path: str):  # Конструктор класса, принимает путь к изображению
        self.path = path  # Сохраняем путь к изображению в атрибуте объекта
        self.image = None  # Изначально изображение не загружено, поэтому ставим None

    def load_image(self):  # Метод для загрузки изображения
        self.image = Image.open(self.path)  # Открываем изображение по указанному пути
        print(f"Изображение загружено: {self.path}")  # Выводим сообщение о загрузке
        return self.image  # Возвращаем объект изображения

    def save_as_jpg(self, output_path: str):  # Метод для сохранения изображения в формате JPG
        if self.image:  # Проверяем, загружено ли изображение
            self.image.convert("RGB").save(output_path, "JPEG")  # Конвертируем в RGB и сохраняем как JPG
            print(f"Изображение сохранено в формате JPG: {output_path}")  # Сообщаем о сохранении
        else:  # Если изображение не загружено
            print("Сначала загрузите изображение!")  # Выводим предупреждение

    def rotate_45(self):  # Метод для поворота изображения на 45 градусов
        if self.image:  # Проверяем, загружено ли изображение
            rotated = self.image.rotate(45, expand=True)  # Поворачиваем изображение на 45° с расширением холста
            print("Изображение повернуто на 45°")  # Сообщаем о выполнении операции
            return rotated  # Возвращаем повернутое изображение
        else:  # Если изображение не загружено
            print("Сначала загрузите изображение!")  # Выводим предупреждение
            return None  # Возвращаем None

